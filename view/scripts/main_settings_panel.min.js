/*
 *
 *
 * Copyright: 2014 Panagiotis Vagenas
 *
 * @author Panagiotis Vagenas <pan.vagenas@gmail.com>
 * @since 150120
 */
(function (a)
{
  var b = $xd_v141226_dev.$.extension_class("totos", "$ajax");
  $totos.$ajax = new b();
  $totos.$ajax.generateXMLNow = function (d)
  {
    var c = jQuery(".generate-now");
    $totos.$ajax.get("©ajax.®ajaxGenerateTotosXML", $totos.$ajax.___private_type, [], {
      complete     : function (e)
      {
        var f = e.responseJSON;
        if (f.success != true || f.data.productsUpdated == undefined) {d.find(".modal-title").html('<p class="bg-danger">' + f.data + "</p>")} else {d.find(".modal-title").html('<p class="bg-success">Generation Complete! ' + f.data.productsUpdated + " products included in XML</p>")}
        c.removeClass("disabled").removeClass("loading")
      }, beforeSend: function () {c.addClass("disabled").addClass("loading")}
    })
  };
  $totos.$ajax.copyToClipboard = function (c) {window.prompt("Copy to clipboard: Ctrl+C, Enter", c)};
  a(".generate-now").click(function () {$totos.$ajax.generateXMLNow(a("#generateNowModal"))});
  a("#show-advanced").change(function (c)
  {
    c.preventDefault();
    if (a(this).is(":checked")) {a(".main-settings-form-wrapper").find(".advanced").slideDown("fast")} else {a(".main-settings-form-wrapper").find(".advanced").slideUp("fast")}
  })
})(jQuery);
